/dts-v1/;
/plugin/;

/ {
    compatible = "brcm,bcm2835";

    fragment@0 {
        target = <&dsi1>;
        __overlay__ {
            status = "okay";
        };
    };

    fragment@1 {
        target = <&dsi1_pins>;
        __overlay__ {
            brcm,pins = <12 13>;
            brcm,function = <6>;
            brcm,pull = <0>;
        };
    };

    fragment@2 {
        target-path = "/";
        __overlay__ {
            dsi_panel: panel {
                compatible = "youritech,et055wu01-tt";
                reg = <0>;

                ports {
                    #address-cells = <1>;
                    #size-cells = <0>;

                    port@0 {
                        reg = <0>;

                        panel_in: endpoint {
                            remote-endpoint = <&dsi_out>;
                        };
                    };
                };

                panel-timing {
                    clock-frequency = <50000000>;
                    hactive = <1920>;
                    vactive = <1080>;
                    hfront-porch = <20>;
                    hback-porch = <30>;
                    hsync-len = <10>;
                    vfront-porch = <15>;
                    vback-porch = <8>;
                    vsync-len = <4>;
                };
            };
        };
    };

    fragment@3 {
        target = <&dsi_out>;  // Target the DSI output
        __overlay__ {
	    port {
	        dsi_out: endpoint {
                    remote-endpoint = <&panel_in>;  // Link back to the panel
		};
	    };
        };
    };

    fragment@4 {
        target = <&backlight>;  // Add a backlight controller
        __overlay__ {
            status = "okay";
            brightness-levels = <0 128 255>;  // Define brightness levels
            default-brightness-level = <128>;  // Set the default brightness level
            num-interpolated-steps = <2>;
        };
    };

    __overrides__ {
        panel_name = <&panel>,"compatible";
        brightness = <&backlight>,"brightness-levels";
    };
};
